buildscript {
  dependencies {
    classpath 'org.jetbrains.kotlin:kotlin-gradle-plugin:1.3.72'
    classpath 'com.diffplug.spotless:spotless-plugin-gradle:5.1.0'
    classpath 'com.vanniktech:gradle-maven-publish-plugin:0.12.0'
  }
}

apply plugin: 'org.jetbrains.kotlin.jvm'
apply plugin: 'com.diffplug.spotless'
apply plugin: 'com.vanniktech.maven.publish'

dependencies {
  api 'org.jetbrains.kotlin:kotlin-stdlib'
  api 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.8'

  testImplementation 'junit:junit:4.13'
  testImplementation 'com.google.truth:truth:1.0.1'
  testImplementation 'org.jetbrains.kotlinx:kotlinx-coroutines-test:1.3.8'
}

compileTestKotlin {
  kotlinOptions {
    freeCompilerArgs += [
        '-Xopt-in=kotlin.time.ExperimentalTime',
        '-Xopt-in=kotlinx.coroutines.ExperimentalCoroutinesApi',
    ]
  }
}

spotless {
  kotlin {
    ktlint('0.37.2').userData([
      // TODO this should all come from editorconfig https://github.com/diffplug/spotless/issues/142
      'indent_size': '2',
      'kotlin_imports_layout': 'ascii',
    ])
  }
}

buildscript {
  repositories {
    mavenCentral()
    jcenter()
  }
}
repositories {
  mavenCentral()
  jcenter()
}
